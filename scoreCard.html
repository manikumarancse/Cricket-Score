<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScoreCard</title>
    <link rel="stylesheet" href="./scoreCard.css">
</head>
<body>
    <div id="main">
    <h1 id="teamName">Team 1</h1>
    <!--This part is used to display the Batting details-->
    <div class="grid-table" id="Batting">
        <div class="th Batsman">Batting</div>
        <div class="th run">Runs</div>
        <div class="th balls">Balls</div>
        <div class="th four">4s</div>
        <div class="th six">6s</div>
        <div class="th strike-rate">Strike Rate</div>
    </div>
        <div class="bat-det">
        <div class="Extras">
            <div>Extra:</div>
            <div id="extra">23</div>
        </div>
        <div class="Extras">
            <div>Runs:</div>
            <div id="runs"></div>
        </div>
        <div class="Extras">
            <div>Yet to bat:</div>
            <div></div>
        </div>
            <div><ul id="yet">
            </ul></div>
        </div>
    <!--This part is used to display the Bowling details-->
    <div class="grid-table" id="Bowling">
        <div class="th bowler">Bowling</div>
        <div class="th over">Overs</div>
        <div class="th maiden">Maiden</div>
        <div class="th runs">Runs</div>
        <div class="th wickets">Wickets</div>
        <div class="th economy">Economy</div>
</div>
<!--here we display toss details-->
<h2 id="toss"></h2>
</div>
<script>
    setTimeout(() => (document.location.reload()), 3000);
    const batting=document.getElementById("Batting");
    const bowling=document.getElementById("Bowling");
    let teamdata1=localStorage.getItem("team1")
    let t1,t2;
    let td=JSON.parse(teamdata1)
    if(td.innings === 1){
        let a=localStorage.getItem("team1");
        t1=JSON.parse(a)
        let b=localStorage.getItem("team2");
        t2=JSON.parse(b)
    }
    else{
        let a=localStorage.getItem("team1");
        t2=JSON.parse(a)
        let b=localStorage.getItem("team2");
        t1=JSON.parse(b)
    }
    console.log(t1);
    batDetails();
    bowlDetails();
    Extras();
    Runs();
    yetToBat();
    toss();
    function batDetails(){
        //here we check for the batsman played and display his details
        t1.player.forEach((data)=>{
            // console.log(data)
            if(data.isBatting){
                console.log("hi")
                let name =document.createElement('div');
                name.classList.add('batsman-name','td');
                name.innerText=(!data.batsmanOut) ? data.playerName : `${data.playerName+"*"}` ;
                batting.appendChild(name);
                
                let run =document.createElement('div');
                run.classList.add('batsman-run','td');
                run.innerText=data.batting.battingRuns;
                batting.appendChild(run);

                let balls =document.createElement('div');
                balls.classList.add('batsman-balls','td');
                balls.innerText=data.batting.ballsBatted;
                batting.appendChild(balls);


                let four =document.createElement('div');
                four.classList.add('batsman-four','td');
                four.innerText=data.batting.fours;
                batting.appendChild(four);

                let six =document.createElement('div');
                six.classList.add('batsman-six','td');
                six.innerText=data.batting.sixes;
                batting.appendChild(six);

                let strike =document.createElement('div');
                strike.classList.add('batsman-strike','td');
                let sr=(((data.batting.battingRuns)/(data.batting.ballsBatted))*100).toFixed(2);
                strike.innerText=((isNaN(sr))? 0: sr);
                batting.appendChild(strike);
            }
            else{
                console.log("hi")
            }
        })}

        function bowlDetails(){
            //here we check for the bowler bowled over and display his details
            t2.player.forEach((data)=>{
            // console.log(data)
            if(!data.isBowling){
                console.log("hi")
            }
            else{
                let name =document.createElement('div');
                name.classList.add('bowler-name','td');
                name.innerText=data.playerName;
                bowling.appendChild(name);
                
                let over =document.createElement('div');
                over.classList.add('bowler-over','td');
                over.innerText=data.bowling.over;
                bowling.appendChild(over);

                let maiden =document.createElement('div');
                maiden.classList.add('bowler-maiden','td');
                maiden.innerText=data.bowling.maiden;
                bowling.appendChild(maiden);


                let runs =document.createElement('div');
                runs.classList.add('bowler-runs','td');
                runs.innerText=data.bowling.bowlRuns;
                bowling.appendChild(runs);

                let wicket =document.createElement('div');
                wicket.classList.add('bowler-wicket','td');
                wicket.innerText=data.bowling.wicket;
                bowling.appendChild(wicket);

                let economy =document.createElement('div');
                economy.classList.add('bowler-economy','td');
                let eco= ((data.bowling.bowlRuns)/ ((data.bowling.over === 0) ? 0 :(data.bowling.over))).toFixed(2);
                economy.innerText=(isNaN(eco) || eco === 'Infinity' ) ? parseFloat("0.00") : eco;
                bowling.appendChild(economy);

            }
        })
        }
        function Extras(){
            const extra=document.getElementById("extra")
            let totalExtra=t1.extra.noBall+t1.extra.wide+t1.extra.byes+t1.extra.legByes;
            extra.innerText=`${totalExtra}   (NB ${t1.extra.noBall}, W ${t1.extra.wide}, B ${t1.extra.byes}, LB ${t1.extra.legByes}) `;
        }
        function Runs(){
            const run=document.getElementById("runs")
            run.innerText=t1.totalScore;
        }

        function yetToBat(){
            //here we display the next players to be played
            const yet=document.getElementById("yet");
            td.player.forEach((data)=>{
                console.log(td.player)
                if(!data.isBatting){
                    let player=document.createElement("li")
                    player.innerText=data.playerName;
                    yet.appendChild(player);
                }
            })
        }
        function toss(){
            const toss=document.getElementById("toss");
            toss.innerHTML=(td.innings==1) ? `${td.teamName} won the toss and choose to bat`: `${td.teamName} won the toss and choose to bowl`;
        }
</script>
</body>
</html>